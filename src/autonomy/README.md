# Autonomy

Autonomy 插件用于辅助室内外自主导航，具备增加/存储 Waypoints 序列、开启/暂停导航、可视化 Waypoints 三维空间位置、自定义步态切换等功能。

## GUI 使用方法

GUI 按键功能：

- `Add`：添加一个 Waypoint；
- `Save`：保存之前添加的所有 Waypoints 为 `waypoints.json` 文件；
- `Run`：加载 `waypoints.json` 文件，启动自主导航；
- `Stop`：暂停自主导航。

## 自定义步态切换

用户添加保存完所有 Waypoints 后，可手动修改 `waypoints.json` 文件实现机器人导航时自主切换步态。假设用户点击 `Save` 后生成的 `waypoints.json` 文件内容为：

```json
{
    "0": {
        "total": 3
    },
    "1": {
        "command": 0,
        "next": 2,
        "theta": 1.5211158123552775,
        "x": 0.4004145562648773,
        "y": 0.852397084236145,
        "z": 0.33223068714141846
    },
    "2": {
        "command": 0,
        "next": 3,
        "theta": 1.5503837279683013,
        "x": 0.32854026556015015,
        "y": 4.069746971130371,
        "z": 0.2612072825431824
    },
    "3": {
        "command": 0,
        "next": 4,
        "theta": 1.5561830869813402,
        "x": 0.4067574739456177,
        "y": 8.182792663574219,
        "z": 0.17430292069911957
    }
}
```

假设 Waypoint 2 至 Waypoints 3 之间机器人需要通过一段复杂路面，需要在 Waypoint 2 启动楼梯步态，并在 Waypoint 3 关闭楼梯步态，则只需要修改 `waypoints.json` 文件中相关 Waypoint 的 `command` 值为相应指令码，假设指令码为 26，则 `waypoints.json` 文件修改为：

```json
{
    "0": {
        "total": 3
    },
    "1": {
        "command": 0,
        "next": 2,
        "theta": 1.5211158123552775,
        "x": 0.4004145562648773,
        "y": 0.852397084236145,
        "z": 0.33223068714141846
    },
    "2": {
        "command": 26,
        "next": 3,
        "theta": 1.5503837279683013,
        "x": 0.32854026556015015,
        "y": 4.069746971130371,
        "z": 0.2612072825431824
    },
    "3": {
        "command": 26,
        "next": 4,
        "theta": 1.5561830869813402,
        "x": 0.4067574739456177,
        "y": 8.182792663574219,
        "z": 0.17430292069911957
    }
}
```